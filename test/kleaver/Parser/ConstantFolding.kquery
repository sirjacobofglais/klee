# RUN: %kleaver --builder=constant-folding -print-ast %s > %t

array a[64] : w32 -> w8 = symbolic

# RUN: grep -A 2 "# Query 1$" %t > %t2
# RUN: grep "(query .. false)" %t2
(query [] (Not (Ult (w32 0) (w32 1))))

# Check -- 0 + X ==> X
# RUN: grep -A 2 "# Query 2$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a).)" %t2
(query [] false [(Add w8 0 (Read w8 0 a))])
# RUN: grep -A 2 "# Query 3$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a).)" %t2
(query [] false [(Add w8 (Read w8 0 a) 0)])

# Check -- C_0 + (C_1 + X) ==> (C_0 + C_1) + X
# RUN: grep -A 2 "# Query 4$" %t > %t2
# RUN: grep "(query .. false .(Add w8 30 (Read w8 0 a)).)" %t2
(query [] false [(Add w8 10 (Add w8 20 (Read w8 0 a)))])

# Check -- C_0 + (X + C_1) ==> (C_0 + C_1) + X
# RUN: grep -A 2 "# Query 5$" %t > %t2
# RUN: grep "(query .. false .(Add w8 30 (Read w8 0 a)).)" %t2
(query [] false [(Add w8 10 (Add w8 (Read w8 0 a) 20))])

# Check -- C_0 + (C_1 - X) ==> (C_0 + C_1) - X
# RUN: grep -A 2 "# Query 6$" %t > %t2
# RUN: grep "(query .. false .(Sub w8 30 (Read w8 0 a)).)" %t2
(query [] false [(Add w8 10 (Sub w8 20 (Read w8 0 a)))])

# Check -- C_0 + (X - C_1) ==> (C_0 - C_1) + X
# RUN: grep -A 2 "# Query 7$" %t > %t2
# RUN: grep "(query .. false .(Add w8 246 (Read w8 0 a)).)" %t2
(query [] false [(Add w8 10 (Sub w8 (Read w8 0 a) 20))])

# Check -- (X + Y) + Z ==> X + (Y + Z)
# RUN: grep -A 3 "# Query 8$" %t > %t2
# RUN: grep "(query .. false .(Add w8 (Read w8 0 a)" %t2
# RUN: grep                          "(Add w8 (Read w8 1 a) (Read w8 2 a)" %t2
(query [] false [(Add w8 (Add w8 (Read w8 0 a) (Read w8 1 a)) (Read w8 2 a))])

# Check -- (X - Y) + Z ==> X + (Z - Y)
# RUN: grep -A 3 "# Query 9$" %t > %t2
# RUN: grep "(query .. false .(Add w8 (Read w8 0 a)" %t2
# RUN: grep                          "(Sub w8 (Read w8 2 a) (Read w8 1 a)" %t2
(query [] false [(Add w8 (Sub w8 (Read w8 0 a) (Read w8 1 a)) (Read w8 2 a))])

# Check -- X + (C + Y) ==> C + (X + Y)
# RUN: grep -A 3 "# Query 10$" %t > %t2
# RUN: grep "(query .. false .(Add w8 10" %t2
# RUN: grep                          "(Add w8 (Read w8 0 a) (Read w8 1 a)" %t2
(query [] false [(Add w8 (Read w8 0 a) (Add w8 10 (Read w8 1 a)))])

# Check -- X + (Y + C) ==> C + (X + Y)
# RUN: grep -A 3 "# Query 11$" %t > %t2
# RUN: grep "(query .. false .(Add w8 10" %t2
# RUN: grep                          "(Add w8 (Read w8 0 a) (Read w8 1 a)" %t2
(query [] false [(Add w8 (Read w8 0 a) (Add w8 (Read w8 1 a) 10))])

# Check -- X + (C - Y) ==> C + (X - Y)
# RUN: grep -A 3 "# Query 12$" %t > %t2
# RUN: grep "(query .. false .(Add w8 10" %t2
# RUN: grep                          "(Sub w8 (Read w8 0 a) (Read w8 1 a)" %t2
(query [] false [(Add w8 (Read w8 0 a) (Sub w8 10 (Read w8 1 a)))])

# Check -- X + (Y - C) ==> -C + (X + Y)
# RUN: grep -A 3 "# Query 13$" %t > %t2
# RUN: grep "(query .. false .(Add w8 246" %t2
# RUN: grep                          "(Add w8 (Read w8 0 a) (Read w8 1 a)" %t2
(query [] false [(Add w8 (Read w8 0 a) (Sub w8 (Read w8 1 a) 10))])

# Check -- C_0 - (C_1 + X) ==> (C_0 - C1) - X
# RUN: grep -A 2 "# Query 14$" %t > %t2
# RUN: grep "(query .. false .(Sub w8 10 (Read w8 0 a))" %t2
(query [] false [(Sub w8 20 (Add w8 10 (Read w8 0 a)))])

# Check -- C_0 - (X + C_1) ==> (C_0 + C1) + X
# RUN: grep -A 2 "# Query 15$" %t > %t2
# RUN: grep "(query .. false .(Sub w8 10 (Read w8 0 a))" %t2
(query [] false [(Sub w8 20 (Add w8 (Read w8 0 a) 10))])

# Check -- C_0 - (C_1 - X) ==> (C_0 - C1) + X
# RUN: grep -A 2 "# Query 16$" %t > %t2
# RUN: grep "(query .. false .(Add w8 10 (Read w8 0 a))" %t2
(query [] false [(Sub w8 20 (Sub w8 10 (Read w8 0 a)))])

# Check -- C_0 - (X - C_1) ==> (C_0 + C1) - X
# RUN: grep -A 2 "# Query 17$" %t > %t2
# RUN: grep "(query .. false .(Sub w8 30 (Read w8 0 a))" %t2
(query [] false [(Sub w8 20 (Sub w8 (Read w8 0 a) 10))])

# Check -- (C_0 + X) - C_1 ==> (C_0 - C1) + X
# RUN: grep -A 2 "# Query 18$" %t > %t2
# RUN: grep "(query .. false .(Add w8 246 (Read w8 0 a))" %t2
(query [] false [(Sub w8 (Add w8 10 (Read w8 0 a)) 20)])

# Check -- (X + C_0) - C_1 ==> (C_0 - C1) + X
# RUN: grep -A 2 "# Query 19$" %t > %t2
# RUN: grep "(query .. false .(Add w8 246 (Read w8 0 a))" %t2
(query [] false [(Sub w8 (Add w8 (Read w8 0 a) 10) 20)])

# Check -- (C_0 - X) - C_1 ==> (C_0 - C1) - X
# RUN: grep -A 2 "# Query 20$" %t > %t2
# RUN: grep "(query .. false .(Sub w8 246 (Read w8 0 a))" %t2
(query [] false [(Sub w8 (Sub w8 10 (Read w8 0 a)) 20)])

# Check -- (X - C_0) - C_1 ==> -(C_0 + C1) + X
# RUN: grep -A 2 "# Query 21$" %t > %t2
# RUN: grep "(query .. false .(Add w8 226 (Read w8 0 a))" %t2
(query [] false [(Sub w8 (Sub w8 (Read w8 0 a) 10) 20)])

# Check -- (X + Y) - Z ==> X + (Y - Z)
# RUN: grep -A 3 "# Query 22$" %t > %t2
# RUN: grep "(query .. false .(Add w8 (Read w8 0 a)" %t2
# RUN: grep                          "(Sub w8 (Read w8 1 a) (Read w8 2 a)" %t2
(query [] false [(Sub w8 (Add w8 (Read w8 0 a) (Read w8 1 a)) (Read w8 2 a))])

# Check -- (X - Y) - Z ==> X - (Y + Z)
# RUN: grep -A 3 "# Query 23$" %t > %t2
# RUN: grep "(query .. false .(Sub w8 (Read w8 0 a)" %t2
# RUN: grep                          "(Add w8 (Read w8 1 a) (Read w8 2 a)" %t2
(query [] false [(Sub w8 (Sub w8 (Read w8 0 a) (Read w8 1 a)) (Read w8 2 a))])

# Check -- X - (C + Y) ==> -C + (X - Y)
# RUN: grep -A 3 "# Query 24$" %t > %t2
# RUN: grep "(query .. false .(Add w8 246" %t2
# RUN: grep                          "(Sub w8 (Read w8 0 a) (Read w8 1 a)" %t2
(query [] false [(Sub w8 (Read w8 0 a) (Add w8 10 (Read w8 1 a)))])

# Check -- X - (Y + C) ==> -C + (X - Y)
# RUN: grep -A 3 "# Query 25$" %t > %t2
# RUN: grep "(query .. false .(Add w8 246" %t2
# RUN: grep                          "(Sub w8 (Read w8 0 a) (Read w8 1 a)" %t2
(query [] false [(Sub w8 (Read w8 0 a) (Add w8 (Read w8 1 a) 10))])

# Check -- X - (C - Y) ==> -C + (X + Y)
# RUN: grep -A 3 "# Query 26$" %t > %t2
# RUN: grep "(query .. false .(Add w8 246" %t2
# RUN: grep                          "(Add w8 (Read w8 0 a) (Read w8 1 a)" %t2
(query [] false [(Sub w8 (Read w8 0 a) (Sub w8 10 (Read w8 1 a)))])

# Check -- X - (Y - C) ==> C + (X - Y)
# RUN: grep -A 3 "# Query 27$" %t > %t2
# RUN: grep "(query .. false .(Add w8 10" %t2
# RUN: grep                          "(Sub w8 (Read w8 0 a) (Read w8 1 a)" %t2
(query [] false [(Sub w8 (Read w8 0 a) (Sub w8 (Read w8 1 a) 10))])

# Check -- X * 0 ==> 0
# RUN: grep -A 2 "# Query 28$" %t > %t2
# RUN: grep "(query .. false .(w8 0)." %t2
(query [] false [(Mul w8 0 (Read w8 0 a))])

# Check -- X * 1 ==> X
# RUN: grep -A 2 "# Query 29$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(Mul w8 1 (Read w8 0 a))])

# Check -- X & 0 ==> 0
# RUN: grep -A 2 "# Query 30$" %t > %t2
# RUN: grep "(query .. false .(w8 0)." %t2
(query [] false [(And w8 0 (Read w8 0 a))])

# Check -- X & 0b1...1 ==> X
# RUN: grep -A 2 "# Query 31$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(And w8 255 (Read w8 0 a))])

# Check -- X | 0 ==> X
# RUN: grep -A 2 "# Query 32$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(Or w8 0 (Read w8 0 a))])

# Check -- X | 0b1...1 ==> X
# RUN: grep -A 2 "# Query 33$" %t > %t2
# RUN: grep "(query .. false .(w8 255)." %t2
(query [] false [(Or w8 255 (Read w8 0 a))])

# Check -- X ^ 0b1...1 ==> X
# RUN: grep -A 2 "# Query 34$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(Xor w8 0 (Read w8 0 a))])

# Check -- true == X ==> X
# RUN: grep -A 2 "# Query 35$" %t > %t2
# RUN: grep "(query .. false .(Eq 0 (Read w8 0 a))." %t2
(query [] false [(Eq true (Eq 0 (Read w8 0 a)))])

# Check -- !!X ==> X
# RUN: grep -A 2 "# Query 36$" %t > %t2
# RUN: grep "(query .. false .(Eq 0 (Read w8 0 a))." %t2
(query [] false [(Not (Not (Eq 0 (Read w8 0 a))))])

# Check -- !Const
# RUN: grep -A 2 "# Query 37$" %t > %t2
# RUN: grep "(query .. false .true." %t2
(query [] false [(Eq (Not w32 0xdeadbeef) 0x21524110)])




# Check -- X / 1 ==> X
# RUN: grep -A 2 "# Query 38$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(SDiv w8 (Read w8 0 a) 1)])

# Check -- X / 1 ==> X
# RUN: grep -A 2 "# Query 39$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(UDiv w8 (Read w8 0 a) 1)])

# Check -- 0 / X ==> 0
# RUN: grep -A 2 "# Query 40$" %t > %t2
# RUN: grep "(query .. false .(w8 0)." %t2
(query [] false [(UDiv w8 0 (Read w8 0 a))])

# Check -- 0 / X ==> 0
# RUN: grep -A 2 "# Query 41$" %t > %t2
# RUN: grep "(query .. false .(w8 0)." %t2
(query [] false [(SDiv w8 0 (Read w8 0 a))])

# Check -- X % 1 ==> 0
# RUN: grep -A 2 "# Query 42$" %t > %t2
# RUN: grep "(query .. false .(w8 0)." %t2
(query [] false [(SRem w8 (Read w8 0 a) 1)])

# Check -- X % 1 ==> 0
# RUN: grep -A 2 "# Query 43$" %t > %t2
# RUN: grep "(query .. false .(w8 0)." %t2
(query [] false [(URem w8 (Read w8 0 a) 1)])

# Check -- 0 % X ==> 0
# RUN: grep -A 2 "# Query 44$" %t > %t2
# RUN: grep "(query .. false .(w8 0)." %t2
(query [] false [(URem w8 0 (Read w8 0 a))])

# Check -- 0 % X ==> 0
# RUN: grep -A 2 "# Query 45$" %t > %t2
# RUN: grep "(query .. false .(w8 0)." %t2
(query [] false [(SRem w8 0 (Read w8 0 a))])

# Check -- X << 0 ==> X
# RUN: grep -A 2 "# Query 46$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(Shl w8 (Read w8 0 a) 0)])

# Check -- X >> 0 ==> X
# RUN: grep -A 2 "# Query 47$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(LShr w8 (Read w8 0 a) 0)])

# Check -- X >>a 0 ==> X
# RUN: grep -A 2 "# Query 48$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(AShr w8 (Read w8 0 a) 0)])

# Check -- 0 << X ==> 0
# RUN: grep -A 2 "# Query 49$" %t > %t2
# RUN: grep "(query .. false .(w8 0)." %t2
(query [] false [(Shl w8 0 (Read w8 0 a))])

# Check -- 0 >> X ==> 0
# RUN: grep -A 2 "# Query 50$" %t > %t2
# RUN: grep "(query .. false .(w8 0)." %t2
(query [] false [(LShr w8 0 (Read w8 0 a))])

# Check -- 0 >>a X ==> 0
# RUN: grep -A 2 "# Query 51$" %t > %t2
# RUN: grep "(query .. false .(w8 0)." %t2
(query [] false [(AShr w8 0 (Read w8 0 a))])

# Check -- -1 << X ==> -1
# RUN: grep -A 2 "# Query 52$" %t > %t2
# RUN: grep "(query .. false .(w8 255)." %t2
(query [] false [(Shl w8 255 (Read w8 0 a))])

# Check -- -1 >> X ==> -1
# RUN: grep -A 2 "# Query 53$" %t > %t2
# RUN: grep "(query .. false .(w8 255)." %t2
(query [] false [(LShr w8 255 (Read w8 0 a))])

# Check -- -1 >> X ==> -1
# RUN: grep -A 2 "# Query 54$" %t > %t2
# RUN: grep "(query .. false .(w8 255)." %t2
(query [] false [(AShr w8 255 (Read w8 0 a))])

# REVERTED: Incorrect. Equated - and ~ and they're not the same
# Check -- 0 - X => -X
# RUN: grep -A 2 "# Query 55$" %t > %t2
# RUN: grep "(query .. false .." %t2
(query [] false [(Sub w8 0 (Read w8 0 a))])

# Check -- X - X => 0
# RUN: grep -A 2 "# Query 56$" %t > %t2
# RUN: cat %t2
# RUN: grep "(query .. false .(w8 0)." %t2
(query [] false [(Sub w8 X:(Read w8 0 a) X)])

# Check -- X + (Y - X) => Y
# RUN: grep -A 2 "# Query 57$" %t > %t2
# RUN: grep "(query .. false .(Read w8 1 a)." %t2
(query [] false [(Add w8 X:(Read w8 0 a) (Sub w8 (Read w8 1 a) X))])

# Check -- (X | Y) & X => X
# RUN: grep -A 2 "# Query 58$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(And w8 (Or w8 X:(Read w8 0 a) (Read w8 1 a)) X)])

# Check -- (Y | X) & X => X
# RUN: grep -A 2 "# Query 59$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(And w8 (Or w8 (Read w8 1 a) X:(Read w8 0 a)) X)])

# Check --  X & (Y | X) => X
# RUN: grep -A 2 "# Query 60$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(And w8 X:(Read w8 0 a) (Or w8 (Read w8 1 a) X))])


# Check --  X & (X | Y) => X
# RUN: grep -A 2 "# Query 61$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(And w8 X:(Read w8 0 a) (Or w8 X (Read w8 1 a)))])

# Check -- (X & Y) & | => X
# RUN: grep -A 2 "# Query 62$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(Or w8 (And w8 X:(Read w8 0 a) (Read w8 1 a)) X)])

# Check -- (Y & X) | X => X
# RUN: grep -A 2 "# Query 63$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(Or w8 (And w8 (Read w8 1 a) X:(Read w8 0 a)) X)])

# Check --  X | (Y & X) => X
# RUN: grep -A 2 "# Query 64$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(Or w8 X:(Read w8 0 a) (And w8 (Read w8 1 a) X))])


# Check --  X | (X & Y) => X
# RUN: grep -A 2 "# Query 65$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(Or w8 X:(Read w8 0 a) (And w8 X (Read w8 1 a)))])

# Check --  X & X => X
# RUN: grep -A 2 "# Query 66$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(And w8 X:(Read w8 0 a) X)])

# Check --  X | X => X
# RUN: grep -A 2 "# Query 67$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(Or w8 X:(Read w8 0 a) X)])

# Check --  X ^ X => 0
# RUN: grep -A 2 "# Query 68$" %t > %t2
# RUN: grep "(query .. false .(w8 0)." %t2
(query [] false [(Xor w8 X:(Read w8 0 a) X)])

# Check --  X & ~X => 0
# RUN: grep -A 2 "# Query 69$" %t > %t2
# RUN: grep "(query .. false .(w8 0)." %t2
(query [] false [(And w8 X:(Read w8 0 a) (Not X))])

# Check --  ~X & X => 0
# RUN: grep -A 2 "# Query 70$" %t > %t2
# RUN: grep "(query .. false .(w8 0)." %t2
(query [] false [(And w8 (Not w8 X:(Read w8 0 a)) X)])

# Check --  ~X + X => -1
# RUN: grep -A 2 "# Query 71$" %t > %t2
# RUN: grep "(query .. false .(w8 255)." %t2
(query [] false [(Add w8 (Not w8 X:(Read w8 0 a)) X)])

# Check --  X + ~X => -1
# RUN: grep -A 2 "# Query 72$" %t > %t2
# RUN: grep "(query .. false .(w8 255)." %t2
(query [] false [(Add w8 X:(Read w8 0 a) (Not X))])

# Check --  ~X | X => -1
# RUN: grep -A 2 "# Query 73$" %t > %t2
# RUN: cat %t2
# RUN: grep "(query .. false .(w8 255)." %t2
(query [] false [(Or w8 (Not w8 X:(Read w8 0 a)) X)])

# Check --  X | ~X => -1
# RUN: grep -A 2 "# Query 74$" %t > %t2
# RUN: grep "(query .. false .(w8 255)." %t2
(query [] false [(Or w8 X:(Read w8 0 a) (Not X))])

# Check --  X | ~(X & Y) => -1
# RUN: grep -A 2 "# Query 75$" %t > %t2
# RUN: cat %t2
# RUN: grep "(query .. false .(w8 255)." %t2
(query [] false [(Or w8 X:(Read w8 0 a) (Not w8 (And w8 X (Read w8 1 a))))])

# Check --  X | ~(Y & X) => -1
# RUN: grep -A 2 "# Query 76$" %t > %t2
# RUN: grep "(query .. false .(w8 255)." %t2
(query [] false [(Or w8 X:(Read w8 0 a) (Not w8 (And w8 (Read w8 1 a) X)))])

# Check --  ~(X & Y) | X => -1
# RUN: grep -A 2 "# Query 77$" %t > %t2
# RUN: grep "(query .. false .(w8 255)." %t2
(query [] false [(Or w8 (Not w8 (And w8 X:(Read w8 0 a) (Read w8 1 a))) X)])

# Check -- ~(Y & X) | X => -1
# RUN: grep -A 2 "# Query 78$" %t > %t2
# RUN: grep "(query .. false .(w8 255)." %t2
(query [] false [(Or w8 (Not w8 (And w8 (Read w8 1 a) X:(Read w8 0 a))) X)])

# Check -- X == X => true
# RUN: grep -A 2 "# Query 79$" %t > %t2
# RUN: grep "(query .. false .true." %t2
(query [] false [(Eq X:(Read w8 0 a) X)])

# Check -- X <u X => false
# RUN: grep -A 2 "# Query 80$" %t > %t2
# RUN: grep "(query .. false .false." %t2
(query [] false [(Ult X:(Read w8 0 a) X)])

# Check -- X <=u X => true
# RUN: grep -A 2 "# Query 81$" %t > %t2
# RUN: grep "(query .. false .true." %t2
(query [] false [(Ule X:(Read w8 0 a) X)])

# Check -- X <s X => false
# RUN: grep -A 2 "# Query 82$" %t > %t2
# RUN: grep "(query .. false .false." %t2
(query [] false [(Slt X:(Read w8 0 a) X)])

# Check -- X <=s X => true
# RUN: grep -A 2 "# Query 83$" %t > %t2
# RUN: grep "(query .. false .true." %t2
(query [] false [(Sle X:(Read w8 0 a) X)])

# Check -- X <u 0 => false
# RUN: grep -A 2 "# Query 84$" %t > %t2
# RUN: grep "(query .. false .false." %t2
(query [] false [(Ult X:(Read w8 0 a) (w8 0))])

# Check -- Select Y X X => X
# RUN: grep -A 2 "# Query 85$" %t > %t2
# RUN: grep "(query .. false .(Read w8 0 a)." %t2
(query [] false [(Select w8 (Eq w8 0 (Read w8 1 a)) X:(Read w8 0 a) X)])

# Check -- Select X + X => X << 1
# RUN: grep -A 2 "# Query 86$" %t > %t2
# RUN: grep "(query .. false .(Shl w8 (Read w8 0 a) 1)." %t2
(query [] false [(Add w8 X:(Read w8 0 a) X)])

# Check -- (X + Y) + Y ==> X + (Y << 1)  (via X + (Y + Y))
# RUN: grep -A 3 "# Query 87$" %t > %t2
# RUN: grep "(query .. false .(Add w8 (Read w8 0 a)" %t2
# RUN: grep                          "(Shl w8 (Read w8 1 a) 1" %t2
(query [] false [(Add w8 (Add w8 (Read w8 0 a) (Read w8 1 a)) (Read w8 1 a))])

# By composition: no specific rule
# Check -- (X + C1) + (C2 - B) ==> (A - B) + (C1 + C2)
# RUN: grep -A 3 "# Query 88$" %t > %t2
# RUN: grep "(query .. false .(Add w8 7" %t2 
# RUN: grep "(Sub w8 (Read w8 0 a) (Read w8 1 a)))." %t2
(query [] false [(Add w8 (Add w8 (Read w8 0 a ) 3) (Sub w8 4 (Read w8 1 a)))])

# Check -- (0 + X) == X => true 
# RUN: grep -A 3 "# Query 89$" %t > %t2
# RUN: grep "(query .. false .true." %t2 
(query [] false [(Eq w8 (Add w8 X:(Read w8 0 a ) 0) X)])

# Check -- X == (1 + X) => false 
# RUN: grep -A 3 "# Query 90$" %t > %t2
# RUN: grep "(query .. false .false." %t2 
(query [] false [(Eq w8 X:(Read w8 0 a) (Add w8 1 X))])

# Check -- (1 - X) == X => false
# RUN: grep -A 3 "# Query 91$" %t > %t2
# RUN: grep "(query .. false .false." %t2 
(query [] false [(Eq w8 (Sub w8 X:(Read w8 0 a) 1) X)])

# Check -- X == (0 - X) => true 
# RUN: grep -A 3 "# Query 92$" %t > %t2
# RUN: grep "(query .. false .true." %t2 
(query [] false [(Eq w8 X:(Read w8 0 a) (Sub w8 0 X))])

# Check -- X ^ ~X => -1 
# RUN: grep -A 3 "# Query 93$" %t > %t2
# RUN: grep "(query .. false .(w8 255)." %t2 
(query [] false [(Xor w8 X:(Read w8 0 a) (Not w8 X))])

# Check --  (X ^ Y) | (X | Y) => (X | Y)
# RUN: grep -A 2 "# Query 94$" %t > %t2
# RUN: cat %t2
# RUN: grep "(query .. false .(Or w8 (Read w8 0 a) (Read w8 1 a))." %t2
(query [] false [(Or w8 (Xor w8 X:(Read w8 0 a) Y:(Read w8 1 a)) (Or w8 X Y))])

# Check --  (Y | X) | (X ^ Y) => (Y | X)
# RUN: grep -A 2 "# Query 95$" %t > %t2
# RUN: cat %t2
# RUN: grep "(query .. false .(Or w8 (Read w8 1 a) (Read w8 0 a))." %t2
(query [] false [(Or w8 (Or w8 X:(Read w8 1 a) Y:(Read w8 0 a)) (Xor w8 X Y))])

# Check --  ~(X ^ Y) | (X | Y) => -1
# RUN: grep -A 2 "# Query 96$" %t > %t2
# RUN: cat %t2
# RUN: grep "(query .. false .(w8 255)." %t2
(query [] false [(Or w8 (Not w8 (Xor w8 X:(Read w8 0 a) Y:(Read w8 1 a))) (Or w8 X Y))])

# Check --  (Y | X) | ~(X ^ Y) => -1
# RUN: grep -A 2 "# Query 97$" %t > %t2
# RUN: cat %t2
# RUN: grep "(query .. false .(w8 255)." %t2
(query [] false [(Or w8 (Or w8 X:(Read w8 1 a) Y:(Read w8 0 a)) (Not w8 (Xor w8 X Y)))])

# Check --  (X | Y) <u X => false
# RUN: grep -A 2 "# Query 98$" %t > %t2
# RUN: cat %t2
# RUN: grep "(query .. false .false." %t2
(query [] false [(Ult w8 (Or w8 X:(Read w8 1 a) Y:(Read w8 0 a)) X)])

# Check --  X <=u (X | Y) => true
# RUN: grep -A 2 "# Query 99$" %t > %t2
# RUN: cat %t2
# RUN: grep "(query .. false .true." %t2
(query [] false [(Ule w8 X:(Read w8 0 a) (Or w8 X Y:(Read w8 0 a)))])

# Check --  (X URem Y) == Y => false
# RUN: grep -A 2 "# Query 100$" %t > %t2
# RUN: cat %t2
# RUN: grep "(query .. false .false." %t2
(query [] false [(Eq w8 (URem w8 X:(Read w8 0 a) Y:(Read w8 1 a)) Y)])

# Check --  (X URem Y) < Y => true
# RUN: grep -A 2 "# Query 101$" %t > %t2
# RUN: cat %t2
# RUN: grep "(query .. false .true." %t2
(query [] false [(Ult w8 (URem w8 X:(Read w8 0 a) Y:(Read w8 1 a)) Y)])

# Check --  Y <= (X URem Y) => false
# RUN: grep -A 2 "# Query 102$" %t > %t2
# RUN: cat %t2
# RUN: grep "(query .. false .false." %t2
(query [] false [(Ule w8 Y:(Read w8 1 a) (URem w8 X:(Read w8 0 a) Y))])

# Check --  (X URem Y) <= X => true
# RUN: grep -A 2 "# Query 103$" %t > %t2
# RUN: cat %t2
# RUN: grep "(query .. false .true." %t2
(query [] false [(Ule w8 (URem w8 X:(Read w8 0 a) Y:(Read w8 0  a)) X)])

# Check --  X < (X URem Y) => false
# RUN: grep -A 2 "# Query 104$" %t > %t2
# RUN: cat %t2
# RUN: grep "(query .. false .false." %t2
(query [] false [(Ult w8 X:(Read w8 0 a) (URem w8 X Y:(Read w8 1 a)))])

# Check --  X <u (X & Y) => false
# RUN: grep -A 2 "# Query 105$" %t > %t2
# RUN: cat %t2
# RUN: grep "(query .. false .false." %t2
(query [] false [(Ult w8 X:(Read w8 0 a) (And w8 X Y:(Read w8 1 a)))])

# Check -- (Y & X) <= X => true
# RUN: grep -A 2 "# Query 106$" %t > %t2
# RUN: cat %t2
# RUN: grep "(query .. false .true." %t2
(query [] false [(Ule w8 (URem w8 X:(Read w8 0 a) Y:(Read w8 1 a)) X)])



